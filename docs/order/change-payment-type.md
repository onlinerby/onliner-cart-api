## Изменить способ оплаты заказа

### POST /orders/{orderKey}/change-payment-type

Изменение способа оплаты возможно только при выполнении всех условий:
 - Заказ оформлен по новому жизненному циклу `is_new_flow = 1`
 - Заказ находится в статусе `confirmed` (Подтвержден)
 - Способ оплаты указан `online` или `halva`
 - Статус онлайн оплаты - `auth_failed` (Авторизация средств не удалась)
 - Не истек лимит времени на изменение способа оплаты с момента перехода заказа в статус `confirmed` (Подтвержден)
 - Не превышен лимит на количество изменений способа оплаты (Покупатель может менять карту для оплаты онлайн и каждая новая попытка учитывается как изменение способа оплаты)

Магазин может изменить способ оплаты, только со способа online или halva на любой доступны оффлайн-способ оплаты.
Магазин может изменить способ оплаты, только если по каким-либо причинам не прошла online-оплата.
Доступность нового способа оплаты не проверяется по тарифной сетке, так как подразумевается, что эта операция выполняется только после согласования с клиентом.
Цена предложения по халве может отличаться от обычной цены и при создании заказа фиксируется в самом заказе, но при изменении способа оплаты зафиксированная цена не изменяется. 

### Параметры запроса

|Параметр|Тип|Описание|
|---|---|---|
|type|string|Выбранный способ оплаты (доступные значения: cash, terminal или cashless)|

### Пример запроса

```http
POST /orders/qz2wa/change-payment-type
Authorization: Bearer <token>
Accept: application/json; charset=utf-8
Content-Type: application/json; charset=utf-8
```
```json
{
    "type": "terminal"
}
```

### Пример ответа

```http request
HTTP/1.1 202 Accepted
```

### Ответ при попытке изменить несуществующий заказ

```http
HTTP/1.1 404 Not Found
```
```json
{
    "message": "Заказ не найден"
}
```

### Пример ответа, в случае попытки изменения способа оплаты, когда заказ находится в состоянии, в котором не подразумевается изменение способа оплаты

```http
HTTP/1.1 409 Conflict
Content-Type: application/json; charset=utf-8
```

### Пример ответа при возникновении ошибок валидации

```http
HTTP/1.1 422 Unprocessable Entity
Content-Type: application/json; charset=utf-8
```
```json
{
    "message": "Validation failed",
    "errors": {
        "type": [
            "Поле обязательно для заполнения"
        ]
    }
}
```

### Возможные ошибки для полей:

|Параметр|Ошибки|
|---|---|
|type|Поле обязательно для заполнения<br>Значение поля должно быть строкой<br>Выбранное значение поля ошибочно|
