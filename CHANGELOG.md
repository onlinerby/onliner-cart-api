# CHANGELOG

## 03.01.2024

* Добавлена информация (`permissions`) о правах доступа для удаления в [блок с информацией о заказе](docs/order/show.md#описание-полей-ответа)

## 21.08.2023

* Добавлена информация (`promocode`) о промокоде в [блок с информацией о заказе](docs/order/show.md#описание-полей-ответа)
* Добавлена информация (`totals`) о ценах с учетом скидки в [блок с информацией о заказе](docs/order/show.md#описание-полей-ответа)
* Актуализирована информация о позициях в [блоке с информацией о ценовой позиции](docs/order/show.md#описание-блока-с-информацией-о-ценовой-позиции-каждый-объект-в-массиве-positions)

## 21.02.2023

* Добавлена информация (`by_parts_info`) о способе оплаты `Minipay` в [блок с информацией о заказе](docs/order/show.md#описание-полей-ответа)
* Добавлен новый [способ оплаты](README.md#способы-оплаты) `by_parts`
* Добавлены новые [статусы оплаты](README.md#статусы-онлайн-оплаты) для заказов со способом оплаты `by_parts`
* Добавлен новый [статус заказа](README.md#статусы-заказа-и-жизненный-цикл-заказа) `Отменен банком`

## 19.04.2021

* Добавлен [блок с информацией об акциях, примененных к заказу](docs/order/show.md)

## 25.01.2021

* В методах получения инфрмации по заказу и списка заказов контактная информация скрыта также для статуса "в обработке"

## 5.11.2020

* Добавлена документация по [методу получения детальной информации о населенном пункте](docs/order/geo/get_town_by_id.md), указанном в заказе

## 17.09.2020
* Добавлено новое поле в методы получения информации по заказу и списка заказов
    * Добавлено поле `positions.*.position_id` Идентификатор позиции

## 15.09.2020
* Добавлен блок с информацией об оплате в рассрочку в методы изменения заказа, получение информации по заказу и списка заказов - `installment_info`

## 22.06.2020

* Обновлен формат для значения полей полного адреса курьерской доставки и доставки в пункт выдачи в методах изменения заказа, получение информации по заказу и списка заказов
    * delivery.address Формат <Улица>, д. <дом>, к. <корпус>, под. <подъезд>, эт. <этаж>, кв. <квартира>
    * delivery.pickup_point.address.summary Формат <Улица>, д. <дом>, к. <корпус>, под. <подъезд>, эт. <этаж>, пом. <помещение>

## 18.06.2020

* Добавлены новые поля в методы изменения заказа, получение информации по заказу и списка заказов
    * Добавлено поле `contacts.middle_name` Отчество покупателя
    * Добавлено поле `delivery.pickup_point.delivery_confirmed` Пометка о доставке заказа в пункт выдачи
    * Добавлено поле `delivery.pickup_point.delivery_confirmed_at` Время когда был доставлен заказ в пункт выдачи
    * Добавлено поле `delivery.pickup_point.delivery_comment` Дополнительный комментарий к пометке о доставке в пункт выдачи
    * Добавлено поле `delivery.date_from` Начало предполагаемого магазином диапазона времени доставки
    * Добавлено поле `delivery.date_to` Конец предполагаемого магазином диапазона времени доставки
    * Добавлено поле `delivery.date_range` Диапазон дат для доставки
* Обновлена документация по методу ["Изменить заказ"](docs/order/update.md)

## 17.06.2020

* Удалена информация о старом жизненном цикле заказа

## 10.06.2020

* Добавлен метод подтверждения доставки заказа в пункт выдачи (POST /orders/{orderKey}/pickup-point-delivered)
* Обновлена документация по методу ["Получение информации о заказе"](docs/order/show.md)

## 05.06.2020

* Добавлен метод для указания даты доставки заказа (POST /orders/{order_key}/delivery-date)

## 25.02.2020

* Добавлено количество комментариев от магазина по заказу в ответы с информацией о заказе (GET /orders, GET /orders/{orderKey})
* Изменен текст ошибки об обязательности текста комментария (POST /orders/{order_key}/shop-comments)

## 21.02.2020

* Добавлен метод для создания внутреннего комментария для магазина по заказу (POST /orders/{order_key}/shop-comments)
* Добавлен метод для получения списка внутренних комментариев для магазина по заказу (GET /orders/{orderKey}/shop-comments)

## 14.01.2020

* Online-оплата заказов
* Добавлено новое поле в информацию о заказе (GET /orders, GET /orders/{orderKey})
  * Добавлено поле `payment.status` с указанием статуса оплаты в блоке с информацией о заказе
* Добавлен метод для изменения способа оплаты заказа (POST /orders/{orderKey}/change-payment-type)

## 14.11.2019

* Новая карта статусов заказа
* Стоимость и срок доставки заказа вычисляются на основании тарифной сетки курьерской доставки магазина
* Добавлены новые поля в информацию о заказе (GET /orders, GET /orders/{orderKey})
  * Добавлено поле `is_new_flow` в блок с информацией о заказе
  * Добавлены поля `first_name`, `last_name` в блок контактных данных пользователя
  * Добавлен новый блок с детализацией адреса доставки `address_fields` в блок с информацией о доставке
  * Добавлены поля `street`, `building`, `apartment`, `block`, `floor`, `comment` в новый блок с детализацией адреса доставки
  * Добавлены поля `type`, `price`, `days`, `comment`, `is_fake` в блок с информацией о доставке
  * Добавлено поле `payment.type` в блоке с информацией о заказе
  * Поле `order_cost` будет возвращать стоимость заказа с учетом стоимости доставки для новых заказов
  * Поле `contact.name` признано устаревшим и будет убрано после завершения перехода на новую карту статусов заказа
  * Объекты `delivery.town` и `delivery.country` в блоке `positions` актуальны только для заказов, оформленных по старому сценарию (к которым не применялась тарифная сетка)
* Добавлена возможность изменения стоимости доставки (в меньшую сторону) (PATCH /orders/{orderId})
* Добавлена возможность указать комментарий к доставке при передаче заказа в доставку (PATCH /orders/{orderId})

## 28.06.2019

* Убрана поддержка валюты BYR:
  * Убрано поле `total_cost` из блока с информацией о заказе
  * Убрано поле `order_cost.converted.BYR` из блока с информацией о заказе
  * Убрано поле `price.amount` из блока с информацией о ценовой позиции (каждый объект в массиве positions)
  * Убрано поле `position_price.converted.BYR` из блока с информацией о ценовой позиции (каждый объект в массиве positions)
  * Убрано поле `delivery.town.price` из блока с информацией о ценовой позиции (каждый объект в массиве positions)
  * Убрано поле `delivery.town.delivery_price.converted.BYR` из блока с информацией о ценовой позиции (каждый объект в массиве positions)
  * Убрано поле `delivery.country.price` из блока с информацией о ценовой позиции (каждый объект в массиве positions)
  * Убрано поле `delivery.country.delivery_price.converted.BYR` из блока с информацией о ценовой позиции (каждый объект в массиве positions)

## 24.04.2018

* При отмене заказа необходимо указывать причину отмены (PATCH /orders/{orderId}, GET /resources/shop-cancel-reasons)

## 23.11.2017

* Добавлен артикул товара в описание позиции (GET /orders, GET /orders/{orderKey})

## 27.12.2016

* Удален метод для удаления позиций из заказа (DELETE /orders/{orderId}/entries/{entryId})
* Удален метод для изменения позиций в заказе (PATCH /orders/{orderId}/entries/{entryId})

## 12.12.2016

* Запрещено превышать изначально указанное клиентом количество позиций в заказе (метод PATCH /orders/{orderId}/entries/{entryId})
* Добавлено отображение изначально указанного клиентом количества позиций в заказе в методы получения информации о заказах

## 08.12.2016

* Удален метод для разделения заказа продавцом (POST /orders/{orderId}/divide)

## 04.09.2016

* Первая версия документации Cart API
