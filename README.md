# Onliner Cart API

Адрес API - https://cart.api.onliner.by.

Ресурс доступен только по протоколу HTTPS.

Все информация о временных отметках передается в виде строки в формате [ATOM RFC3339](https://tools.ietf.org/html/rfc3339) (пример: 2005-08-15T15:52:01+00:00).

Для всех запросов следует указывать HTTP заголовок **Accept**. По умолчанию его необходимо передавать со значением *application/json*.

Если происходит передача данных от клиента на сервер (например, при выполнении запросов типа POST, PATCH, DELETE), необходимо указывать заголовок **Content-Type** со значением *application/json*.

При выполнении каждого запроса в заголовках запроса необходимо передавать заголовок **Authorization** cо значением *Bearer %AUTH_TOKEN%*,
где *%AUTH_TOKEN%* - авторизационный токен, полученный после [авторизации на стороне b2bapi](https://github.com/onlinerby/onliner-b2b-api/blob/master/docs/oauth20.md).

Примечание: авторизационный токен для работы с cart.api несколько длиннее, чем токен для работы с b2b-api. Это нормально.
 
Для работы с cart.api необходимо зарегистрировать новое приложение на [странице настройки API](http://b2b.onliner.by/api).

- [Список изменений](CHANGELOG.md)
- [Получение доступа к API](https://github.com/onlinerby/onliner-b2b-api/blob/master/docs/oauth20.md)

## Статусы заказа и жизненный цикл заказа

| Код статуса | Название статуса | Описание статуса |
|---|---|---|
| new | Новый | Заказ оформлен покупателем и ожидает перехода в статус "В обработке" |
| confirmed | В обработке | Заказ находится в обработке (в том числе в процессе доставки покупателю) |
| delivered | Доставлен | Заказ выполнен и полностью доставлен покупателю |
| shop_canceled | Отменен магазином | Заказ отменен магазином и не может быть выполнен |
| user_canceled | Отменен покупателем | Заказ отменен покупателем |
| expired | Просрочен | Магазин не успел обработать новый заказ в течение отведенного времени на обработку заказов |

Покупатель может отменить заказ в любой момент.

Статус "Просрочен" назначается системой автоматически, если магазин не успел отменить или подтвердить заказ в течение отведенного времени на обработку заказов.

Статус "Доставлен" может назначаться системой автоматически после перевода в статус "В обработке" через 2 недели + максимальное количество дней доставки среди товаров в заказе. Настоятельно рекомендуется вручную изменять статус заказа на "Доставлен", но ТОЛЬКО после фактической доставки всего заказа покупателю.

Если заказ находится в статусах, отличных от "В обработке" или "Доставлен", то контактная информация пользователя и адрес доставки (кроме города) для магазина будут недоступны.

## Доступные методы API

|Ресурс|Описание|
|---|---|
| [GET /orders](docs/order/index.md) | Список заказов магазина |
| [GET /orders/{orderKey}](docs/order/show.md) | Получение информации о заказе |
| [PATCH /orders/{orderId}](docs/order/update.md) | Изменить заказ |
| [GET /resources/shop-cancel-reasons](docs/resources/shop_cancel_reasons.md) | Cписок доступных причин для отмены заказа магазином |

## В случае возникновения проблем либо технических вопросов по работе с API, создавайте Issue в данном репозитории.
